{% extends "template.html" %}

{% block title %}Recommendations - EduHelp Pro{% endblock %}

{% block recommendations_active %}dark:bg-gray-700 dark:text-white bg-[#ff8066]/20 text-[#ff8066]{% endblock %}

{% block page_icon %}ðŸ“š{% endblock %}
{% block page_title %}Tailored Resources{% endblock %}
{% block page_description %}Recommendations for {{ selected_subject }}{% endblock %}

{% block tab_navigation %}
<div class="flex items-center space-x-3 sm:mt-7 mt-4">
    <a href="#" class="px-3 border-b-2 border-transparent text-gray-600 dark:text-gray-400 pb-1.5" onclick="goBackToSelection()">Select Subject</a>
    <a href="#" class="px-3 border-b-2 border-[#ff8066] text-[#ff8066] dark:text-white dark:border-white pb-1.5">Recommendations</a>
</div>
{% endblock %}

{% block content %}
<div class="mb-4">
    <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition mr-2" onclick="goBackToSelection()">
        Back to Selection
    </button>
</div>

{% if recommendations %}
    {% for difficulty, recs in recommendations.items() %}
        {% if recs %}
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">{{ difficulty }}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for rec in recs %}
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
                        <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-2">{{ rec.title }}</h4>
                        <p class="text-gray-600 dark:text-gray-400 mb-4"><strong>Subject:</strong> {{ rec.subject }}</p>
                        <div class="flex space-x-2">
                            <a href="{{ rec.article_link }}" target="_blank" class="px-4 py-2 bg-[#ff8066] text-white rounded-md hover:bg-[#ff8066]/80 transition text-sm">
                                ðŸ“– Article
                            </a>
                            <a href="{{ rec.youtube_link }}" target="_blank" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition text-sm">
                                ðŸŽ¥ YouTube
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endfor %}
{% else %}
    <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 text-center">
        <div class="text-6xl mb-4">ðŸ“š</div>
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No Recommendations Found</h3>
        <p class="text-gray-600 dark:text-gray-400">No recommendations found for this subject.</p>
    </div>
{% endif %}
{% endblock %}

{% block page_scripts %}
const studentId = "{{ student.id }}";

function goBackToSelection() {
    window.location.href = `/select_subject/${studentId}`;
}
{% endblock %}